{"data":{"markdownRemark":{"html":"<p>这集咱们要动手做些东西了。要想在 Nervos 的 AppChain 上面部署合约，首先要有拥有一个账户，里面要有币。因为部署是有费用的，到时候费用就会从这个账户里面扣除。这集就来完成创建账户并且往里面充值的操作。注意，课程中使用的是 AppChain 的测试链，所以申请到的代币也是测试链代币，是可以免费领取，不花钱的。</p>\n<h2 id=\"基本原理\"><a href=\"#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\" aria-label=\"基本原理 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本原理</h2>\n<p>我们先来生成一个 Nervos AppChain 的账户，也就是 account 。account 主要包含两项内容：地址和私钥。</p>\n<p>我的第一直觉是用 Nervos 的 Neuron 钱包去生成。但是在手机上安装了 Neuron 之后，发现 Neuron 生成的 account，对应的私钥是不能导出的，应该是导出功能暂时还没有开发，未来有可能会加上。不管怎么说，部署合约的时候肯定是需要私钥的，所以这个方案放弃。可行的方案是使用官方 SDK Nervos.js 去生成。Nervos.js 可以通过安装 <code class=\"gatsby-code-text\">@nervos/chain</code> 这个 npm 包来获取，我们可以在 JS 程序中去导入 Nervos.js ，去操作 Nervos AppChain 。功能跟以太坊的 Web3js 类似。</p>\n<p>Nervos.js 不仅仅能帮我们生成账户，后续小节中，我们还要用它来部署智能合约，以及调用部署好的合约。详细的接口介绍可以参考 Nervos.js 的 npm 主页：<a href=\"https://www.npmjs.com/package/@nervos/chain\">https://www.npmjs.com/package/@nervos/chain</a> 。</p>\n<h2 id=\"生成账户\"><a href=\"#%E7%94%9F%E6%88%90%E8%B4%A6%E6%88%B7\" aria-label=\"生成账户 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>生成账户</h2>\n<p>下一步我们来动手生成账户。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">mkdir demo\ncd demo\nnpm init -y\nyarn add @nervos/chain</code></pre></div>\n<p>命令行中，创建项目文件夹 demo ，进入文件夹生成 package.json 文件之后，安装 <code class=\"gatsby-code-text\">@nervos/chain</code> 这个包。</p>\n<p>index.js</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">const</span> Nervos <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@nervos/chain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">default</span>\n<span class=\"token keyword\">const</span> nervos <span class=\"token operator\">=</span> <span class=\"token function\">Nervos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nervos<span class=\"token punctuation\">.</span>appchain<span class=\"token punctuation\">.</span>accounts<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>创建 index.js 文件，里面写一个 nodejs 脚本。commonjs 模块语法导入 nervos 对象。通过 <code class=\"gatsby-code-text\">accounts.create()</code> 接口就可以来创建账户了。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">node index.js</code></pre></div>\n<p>执行 index.js 脚本，输出信息如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">{ address: &#39;0x6e30aDFF4d6390935B7fe4e8edC689acF58BC9D7&#39;,\n  privateKey:\n   &#39;0x1771e0005e931151fbb35484e408b5cd63154d2b5dbe2f4e8ec22eb628d2763d&#39;,\n  signTransaction: [Function: signTransaction],\n  sign: [Function: sign],\n  encrypt: [Function: encrypt]}</code></pre></div>\n<p>特别注意，私钥 privateKey 是不能泄露给任何人的。上面这个账户就是临时用一下，所以无所谓了。</p>\n<p>于是， account 就到手了。</p>\n<h2 id=\"充值\"><a href=\"#%E5%85%85%E5%80%BC\" aria-label=\"充值 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>充值</h2>\n<p>下一步就可以充值了，或者说叫做充代币了。</p>\n<p><img src=\"https://img.haoqicat.com/2018091201.jpg\"></p>\n<p>再提一遍，由于我们后续部署只需要部署到测试链，所以代币也不需要购买，只需要到水龙头 <a href=\"https://dapp.cryptape.com/faucet/\">https://dapp.cryptape.com/faucet/</a> 去输入地址获取即可，这个操作基本就是秒到账。</p>\n<p>然后，到 AppChain 的区块链浏览器，也就是 microscope.cryptape.com 上，输入账户地址，就可以查询到账户余额了，数值是 0x 打头的，也就是8进制表示的。</p>\n<p><img src=\"https://img.haoqicat.com/2018091202.jpg\"></p>\n<p>也可以用 nervos.js 的 getBalance 接口来读取到余额，当然这需要从代码中体现出地址和测试链链接。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">nervos.appchain.getBalance(address).then(console.log)</code></pre></div>\n<p>账户中有了余额，后续操作就都可以顺利进行了。</p>\n<h2 id=\"总结\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<p>那我们这个小节就到这里了。总结起来就是干了一件事情，获得 AppChain 的一个账户，然后像里面充值了一些测试链代币。</p>","frontmatter":{"title":"申请测试链代币","next":"8-deploy-1.html","prev":"6-wallet.html"},"fields":{"path":"content/nerv-first/7-coin.md","slug":"nerv-first/7-coin.html"}}},"pageContext":{"slug":"nerv-first/7-coin.html"}}